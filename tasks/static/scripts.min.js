/* grunt-todo-server
   https://github.com/kennethcachia/grunt-todo-server
   v0.1.0 */

var View=function(a,b){this._data=a,this._template=b,this._node=null};View.prototype={render:function(a){var b=this._createContainer(),c=this._compileTemplate();b.innerHTML=c,this._node=b.children[0],a.appendChild(this._node)},on:function(a,b,c,d){this._node.addEventListener(b,function(b){this._delegator(b,a,c,d)}.bind(this),!0)},_createContainer:function(){return document.createElement("div")},_compileTemplate:function(){var a=Object.keys(this._data).reduce(function(a,b){return a.replace("{"+b+"}",this._data[b])}.bind(this),this._template,this);return a},_delegator:function(a,b,c,d){a.target.classList.contains(b)&&c.apply(d)}};var Todo=function(a,b){if(this._templates=a,this._data=b,!this._data)throw"Todo data not available";this._init()};Todo.prototype={_init:function(){this._wrapper=document.body.querySelector(".todo"),this._render(),this._bind()},_render:function(){var a,b,c;for(var d in this._data){a=this._data[d],b=this._renderView({name:d},this._templates.file),c=b._node.querySelector(".todo-items");for(var e=0;e<a.length;e++)this._renderView(a[e],this._templates.item,c)}if(0===this._wrapper.children.length){var f=this._randomCompleteMessage();this._renderView({msg:f},this._templates.done)}},_bind:function(){},_randomCompleteMessage:function(){var a=["Ready","All tasks are complete.","No outstanding tasks."],b=a.length,c=Math.floor(Math.random()*b);return a[c]},_renderView:function(a,b,c){var d=new View(a,b);return c=c||this._wrapper,d.render(c),d}},document.addEventListener("DOMContentLoaded",function(){var a={file:'<div class="todo-file"><span class="todo-filename">{name}</span><div class="todo-items"></div></div>',item:'<div class="todo-item"><span class="todo-item-type">{prefix}</span><span class="todo-item-comment">{comment}</div>',done:'<div class="todo-done">{msg}</div>'};new Todo(a,window.TODO_DATA)});